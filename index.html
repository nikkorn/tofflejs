<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>The HTML5 Herald</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">
  
  <!-- Toffle -->
  <script src="toffle.js"></script>

  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>

<body>
	<input type="button" value="Let's Toffle!" onclick="generateMarkup()">
 
	<div id="container"></div>
	
	<br><div id="TimerBox"></div>
	
	<script id="myInfoTemplate" type="text/toffle-template">
	
		<h1>First Name</h1>
		<p> <^ input.fName ^> is my name </p><br>
		
		<h2>Second Name</h2>
		<p><^ input.sName ^></p><br>
		
		<h4>Pets:</h4>
		<^ each pet in input.pets ^> 
			<^ plug pettemplate (petInfo:pet) ^>
		<^/^>
		
		<h3>Age</h3>
		<p><^ input.age ^></p><br>
		
		<^ if input.age ^> There is an age! <^/^>
	</script>
	
	<script id="pettemplate" type="text/toffle-template">
		<hr>
		<p>Name: <^ petInfo.name ^></p>
		<p>Cuteness Level: <^ petInfo.cutenessLevel ^></p>
		<hr>
	</script>

	<script>

		// Test JSON
		var json = {
			fName:"Nikolas",
			sName:"Howard",
			age:25,
			pets:[
				{
					name:"Wilfred",
					cutenessLevel: 6
				},
				{
					name:"Scrabbles",
					cutenessLevel: 4
				},
				{
					name:"Neighbour Cat",
					cutenessLevel: 2
				}
			]
		};

		function generateMarkup()
		{
			// lets see how long it takes do generate our markup using our templates.
			var d = new Date();
			var startTime = d.getTime();
			
			var mytemp = toffle.template(document.getElementById('myInfoTemplate'));
			var output = mytemp.go({ input: json }); 
			document.getElementById('container').innerHTML = output; 
			
			// display the elapsed time
			document.getElementById("TimerBox").innerHTML = "Time Taken: " + ((new Date().getTime() - startTime) / 1000) + "ms" ;
		}
		
	</script>
	
</body>
</html>